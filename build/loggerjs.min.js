var LoggerJS=LoggerJS||function(){function a(a){return(g=e())?(g.onreadystatechange=b,g.open("POST",x,!0),g.setRequestHeader("Content-Type","application/json; charset=utf-8"),void g.send(JSON.stringify(a.getLogEntry()))):(console.error("ERROR - pushToLogServer: no http_request coultd be instanciated"),!1)}function b(){4===this.readyState&&200!==this.status&&console.error("Error while pushing to LogServer",this)}function c(a){if(!(this instanceof c))return new c;a=a?a:{};var b;if(!a.task)throw b=new Error,b.name="LogTaskInstanciationError",b.message="you have to provide a task for the LogTask instance: options = {task: function (logEntry) {/*your task code*/}}",b;if(!a.name)throw b=new Error,b.name="LogTaskInstanciationError",b.message='you have to provide a name for the LogTask instance: options = {name: "xyz"}',b;this.task=a.task,this.name=a.name,this.status="boolean"==typeof a.status?a.status:!0,this.log_level=j.exists(a.logLevel)?a.logLevel:j.ERROR}function d(a){if(!(this instanceof d))return new d;if(a=a?a:{},!a.namespace){var b=new Error;throw b.name="LoggerInstanciationError",b.message='you have to provide a namespace for the Logger instance: options = {namespace: "x.y.z"}',b}a.tags&&(u=a.tags),uniqueLogKeys="boolean"==typeof a.uniqueLogKeys?a.uniqueLogKeys:!0,t=a.namespace,this.status="boolean"==typeof a.status?a.status:!0,this.log_level=j.exists(a.logLevel)?a.logLevel:j.ERROR,a.logServerUrl&&(w=j.exists(a.logServerLevel)?a.logServerLevel:this.log_level,x=a.logServerUrl,this.useLogServer(x,w))}var e,f=function(a){a.userLocation=window.location.href},g=!1;if(window.XMLHttpRequest)e=function(){var a=new XMLHttpRequest;return a.overrideMimeType&&a.overrideMimeType("application/json"),a};else if(window.ActiveXObject)try{new ActiveXObject("Msxml2.XMLHTTP"),e=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(h){try{new ActiveXObject("Microsoft.XMLHTTP"),e=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(h){}}!function(){function b(b,c,d,e,f){var g=null;return f?(!f.fileName&&c&&(f.fileName=c),!f.lineNumber&&d&&(f.lineNumber=d)):(f=new Error,f.message=b,f.fileName=c,f.lineNumber=d),f.name="UnexpectedError",g=new q(f),v&&a(g),console.error(g.toString()),!0}window&&(window.onerror=window.onerror||b)}(this);var i=i||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=i,b=a.lib,c=b.WordArray,d=b.Hasher,e=[],b=a.algo.SHA1=d.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(a,b){for(var c=this._hash.words,d=c[0],f=c[1],g=c[2],h=c[3],i=c[4],j=0;80>j;j++){if(16>j)e[j]=0|a[b+j];else{var k=e[j-3]^e[j-8]^e[j-14]^e[j-16];e[j]=k<<1|k>>>31}k=(d<<5|d>>>27)+i+e[j],k=20>j?k+((f&g|~f&h)+1518500249):40>j?k+((f^g^h)+1859775393):60>j?k+((f&g|f&h|g&h)-1894007588):k+((f^g^h)-899497514),i=h,h=g,g=f<<30|f>>>2,f=d,d=k}c[0]=c[0]+d|0,c[1]=c[1]+f|0,c[2]=c[2]+g|0,c[3]=c[3]+h|0,c[4]=c[4]+i|0},_doFinalize:function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;return b[d>>>5]|=128<<24-d%32,b[(d+64>>>9<<4)+14]=Math.floor(c/4294967296),b[(d+64>>>9<<4)+15]=c,a.sigBytes=4*b.length,this._process(),this._hash},clone:function(){var a=d.clone.call(this);return a._hash=this._hash.clone(),a}});a.SHA1=d._createHelper(b),a.HmacSHA1=d._createHmacHelper(b)}();var j={};j.AUTH="AUTH",j.LOG="LOG",j.INFO="INFO",j.FATAL="FATAL",j.ERROR="ERROR",j.WARNING="WARNING",j.PATH="PATH",j.DEBUG="DEBUG",j.priority={},j.log_priority=[j.AUTH,j.INFO,j.FATAL,j.ERROR,j.WARNING,j.LOG,j.PATH,j.DEBUG];for(var k in j.log_priority)j.priority[j.log_priority[k]]=k;j.checkPriority=function(a,b){return j.priority[a]<=j.priority[b]},j.exists=function(a){return j.priority[a]?!0:!1};var l=function(a,b){var c,d=a.split("\n");return c=b?d[3]:d[1],c=c.indexOf(" (")>=0?c.split(" (")[1].substring(0,c.length-1):c.split("at ")[1],c=c.indexOf(")")>=0?c.split(")")[0]:c},m=null,n=function(a,b){b="boolean"==typeof b?b:!0;var c,d,e={};return a instanceof Error&&(e.type="logentry",e.namespace=t,e.tags=u,e.timestamp=new Date,e.logLevel=a.name,e.uniqueKey=uniqueLogKeys,e.hash=uniqueLogKeys?i.SHA1(e.logMessage+e.timestamp.toISOString()).toString():i.SHA1(e.logMessage).toString(),e.logMessage=a.message instanceof Error?o(a.message):a.message,b&&(e.stack=a.stack),e.logLocation=a.fileName?a.fileName:l(a.stack,a.isFromConsoleWrapper),c=p(e.logLocation),d=c.split(":"),a.lineNumber?(e.fileName=d[0]?d[0]:"unknown",e.lineNumber=a.lineNumber):(e.fileName=d[0]?d[0]:"unknown",e.lineNumber=d[1]?d[1]:"unknown"),e.logLocation.indexOf(":"+e.lineNumber)<0&&(e.logLocation+=":"+e.lineNumber)),e},o=function(a){var b={};return b.name=a.name,b.message=a.message,b.stack=a.stack,b},p=function(a){m||(m=a.lastIndexOf("/")>0?"/":"\\");var b=a.lastIndexOf(m)+1;return b>0?a.substring(b):a},q=q||function(){function a(c,d){if(!(this instanceof a))return new a;b=n(c,d),f(b)}var b={};return a.prototype.getLogEntry=function(){return b},a.prototype.toString=function(){var a="";return a+=b.timestamp.toISOString(),a+=" - ",a+=t,a+=" - ",a+=b.logLevel,a+=" - ",a+=b.logMessage,a+=" - ",a+=b.logLocation},a.prototype.getConsolePrefix=function(){var a="";return a+=b.timestamp.toISOString(),a+=" - ",a+=t,a+=" - ",a+=b.logLevel,a+=" - ",a+=b.logLocation,a+=" -"},a}(this);!function(){c.prototype.setLogLevel=function(a){j.exists(a)&&(this.log_level=a,this.status=!0)},c.prototype.disable=function(){this.status=!1},c.prototype.enable=function(){this.status=!0},c.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1}}();var r={},s=function(a){var b=Error;b.prototype.write=function(a,b){this.isFromConsoleWrapper=!0,this.message=a.length>1?JSON.stringify(a):a[0],"Error"===this.name&&(this.name=b.toUpperCase());var c=new q(this,!1),d=null;for(d in r)j.checkPriority(b.toUpperCase(),r[d].log_level)&&r[d].task(c);for(var e in a)a[e]instanceof Error&&(a[e]=o(a[e]));var f=c.getConsolePrefix();a=[f].concat(a),console&&(console[b]?console[b].apply?console[b].apply(console,a):console[b](a):console.log.apply?console.log.apply(console,a):console.log(a))};var c=function(a){var c=a.toUpperCase();return function(){this.status&&j.checkPriority(c,this.log_level)&&b().write(Array.prototype.slice.call(arguments,0),a)}},d=c("log");for(var e in a)d[a[e].toLowerCase()]=c(a[e].toLowerCase()),d[a[e].toLowerCase()].LEVEL=a[e];return d}(j.log_priority),t=null,u=[];d.prototype=s,d.prototype.constructor=s;var v=!1,w=null,x=null;!function(){var b=null;for(b in j)d.prototype[b]=j[b];d.prototype.setLogLevel=function(a){j.exists(a)&&(this.log_level=a,this.status=!0)},d.prototype.disable=function(){this.status=!1},d.prototype.enable=function(){this.status=!0},d.prototype.toggleStatus=function(){this.status=!this.status},d.prototype.setStatus=function(a){this.status="boolean"==typeof a?a:!1},d.prototype.getNamespace=function(){return t},d.prototype.getTags=function(){return u},d.prototype.be=function(a){return a=a?a:this.log_level,this.status&&j.checkPriority(a,this.log_level)?!0:!1},d.prototype.useLogServer=function(b,d){w=j.exists(d)?d:j.ERROR,v=!0,x=b;var e={name:"LogServer",status:v,logLevel:w,task:a};this.registerLogTask(new c(e))},d.prototype.setLogServerLevel=function(a){w=j.exists(a)?a:j.ERROR,this.setLogTaskLogLevel("LogServer",w)},d.prototype.enableLogServer=function(){this.enableLogTask("LogServer")},d.prototype.disableLogServer=function(){this.disableLogTask("LogServer")},d.prototype.registerLogTask=function(a){a instanceof c&&(r[a.name]=a)},d.prototype.getLogTasks=function(){return r},d.prototype.setLogTaskLogLevel=function(a,b){r[a]&&j.exists(b)&&r[a].setLogLevel(b)},d.prototype.enableLogTask=function(a){r[a]&&r[a].enable()},d.prototype.disableLogTask=function(a){r[a]&&r[a].disable()},d.prototype.setLogTaskStatus=function(a,b){r[a]&&r[a].setLogLevel(b)},d.prototype.unregisterLogTask=function(a){"string"==typeof a&&r[a]&&delete r[a],a instanceof c&&r[a.name]&&delete r[a.name]}}();var y={Logger:d,LogTask:c};for(property in j)"string"==typeof j[property]&&(y[property]=j[property]);return y}(this);